<div class="relativo" ng-if="solicitude">
	<div class="overflow" data-sgk-scroll>
		<div class="detalle bkg">
			
			<div class="row">
				<div class="first">
					<div class="col-7">
						<div class="code">
							<span>Code: {{ solicitude.code }}</span>
						</div>
						<ul class="estados">
							<li class="ico" ng-class="solicitude.state[role] | StateIcons">
								<span></span> {{ solicitude.state[role] | StateSolicitude }}
							</li>
							<li class="ico">
								<span></span> Sol. {{ solicitude.createdAt | DateFormat }}
							</li>
							<li class="ico" ng-if="solicitude.priority" ng-class="solicitude.priority | PriorityIcons">
								<span></span> {{ solicitude.priority | Priority }}
							</li>
							<li class="ico" ng-if="solicitude.duration && !solicitude.pausedAt" >
								<span></span> <div data-sgk-duration ng-model="solicitude.endedAt"></div>
							</li>
						</ul>
					</div>
					<div class="col-5" data-sgk-actions="{{ solicitude.state.type }}">
						<!-- <ul class="btnes">
							<li class="btn pau"><a href="">Pausar</a></li>
							<li class="btn rev"><a href="">Enviar a Revisión</a></li>
						</ul> -->
					</div>
				</div>
			</div><!--/ .row /-->

			<div class="row">
				<div class="first">
					<div class="col-7">
						<ul class="info-detalle">
							<li ng-if="solicitude.ticket.segments">
								<span>Segmento:</span> 
								{{ solicitude.ticket.segments | SegmentArray }}
							</li>
							<li>
								<span>Solicitante:</span> 
								{{ solicitude.createdBy.profile.firstName }} {{ solicitude.createdBy.profile.lastName }}
							</li>
							<li ng-if="solicitude.provider">
								<span>Proveedor:</span> 
								{{ solicitude.provider.profile.company }} ({{ solicitude.provider.profile.firstName }} {{ solicitude.provider.profile.lastName }})
							</li>
							<li ng-if="solicitude.ticket.category">
								<span>Categoría:</span> 
								{{ solicitude.ticket.category.name }}
							</li>
						</ul>
					</div>
					<div class="col-5">
						<div class="inv">
							<p>Involucrados:</p>
							<ul>
								<li  ng-repeat="i in solicitude.involved">
									{{ i.user.profile.firstName }}  {{ i.user.profile.lastName }} ({{ i.role | InvolvedRole }})
								</li>
							</ul>	
						</div>
					</div>
				</div>
			</div><!--/ .row /-->

			<div class="row">
				<div class="info-detalle">
					<h1>{{ solicitude.ticket.title }}</h1>
					<p>{{ solicitude.ticket.description }}</p>
				</div>
			</div><!--/ .row /-->

			<div class="row">
				<div class="first">
					<ul class="files">
						<li ng-repeat="d in solicitude.attachments">
							<a href="{{ d.url }}"  download>
								enviado por
								<div>
									<span class="file">{{ d.name }}</span>
									<span class="download"></span>
								</div>
							</a>
						</li>
					</ul>
				</div>
			</div><!--/ .row /-->
			
			<div class="row" ng-repeat="c in solicitude.comments">
				<div class="first last">
					<div class="comments">
						<div class="col-4">
							<div class="user">
								<div class="avatar">
									<span><img src="images/avatar-user.png" ng-src="{{ c.createdBy.profile.avatar || 'images/avatar-user.png' }}"></span>
								</div>
								<div class="username">
									<span>{{ c.createdBy.profile.firstName }} {{ c.createdBy.profile.lastName }}</span> 
									<p data-sgk-duration ng-model="c.createdAt"></p>
								</div>
							</div>
						</div>
						<div class="col-8">	
							<p>{{ c.content }}</p>
						</div>
					</div>
					<div class="comments">
						<div class="col-4">
						</div>
						<div class="col-8">	
							<ul>
                <li ng-repeat="att in c.attachments">
                  <a href="{{ att.link }}" download>{{ att.name }}</a>
                </li>
              </ul>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="first last">
					<div class="comments">
						<div class="col-8">	
	            <form name="form" ng-submit="addComment(form)">
	                <textarea class="round" name="message" rows="9" ng-model="solicitude.comment"></textarea>
	                <fieldset>
	                	<input class="submit boton1 round" type="submit" value="Enviar">
	                </fieldset>
	                <fieldset>
	                  <div data-sgk-uploader-multi="{{ solicitude._id }}" data-sgk-type="comments" sgk-position="buttom" ng-model="solicitude.attachments"></div>
	                </fieldset>
	            </form>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>